<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Amos&#39; Common Libraries: ab_memory.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Amos&#39; Common Libraries
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Amos&#39; Libraries</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ab_memory.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Memory handling.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d7/d05/ab__common_8h_source.html">ab_common.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ab_memory.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/d5f/ab__memory_8h__incl.png" border="0" usemap="#aab__memory_8h" alt=""/></div>
<map name="ab__memory_8h" id="aab__memory_8h">
<area shape="rect" title="Memory handling." alt="" coords="33,5,134,32"/>
<area shape="rect" href="../../d7/d05/ab__common_8h.html" title="Common macros and typedefs." alt="" coords="31,80,135,107"/>
<area shape="rect" title=" " alt="" coords="5,155,71,181"/>
<area shape="rect" title=" " alt="" coords="95,155,163,181"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/d8c/ab__memory_8h__dep__incl.png" border="0" usemap="#aab__memory_8hdep" alt=""/></div>
<map name="ab__memory_8hdep" id="aab__memory_8hdep">
<area shape="rect" title="Memory handling." alt="" coords="5,5,107,32"/>
<area shape="rect" href="../../d2/d40/ab__json_8h.html" title="JSON functions, mostly used by pre&#45;generated files." alt="" coords="17,155,95,181"/>
<area shape="rect" href="../../d0/d57/ab__string_8h.html" title="Using string fragments, usually but not exclusively sections of larger strings." alt="" coords="54,80,141,107"/>
</map>
</div>
</div>
<p><a href="../../d0/d0a/ab__memory_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0436d3ae4dac7362742c35ea6a146fea"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#a0436d3ae4dac7362742c35ea6a146fea">abm_PushStruct</a>(Arena,  Type)&#160;&#160;&#160;(Type*)abm_PushSize_(Arena, sizeof(Type))</td></tr>
<tr class="memdesc:a0436d3ae4dac7362742c35ea6a146fea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get memory for the type or struct and return a pointer to the struct type.  <a href="../../d0/d0a/ab__memory_8h.html#a0436d3ae4dac7362742c35ea6a146fea">More...</a><br /></td></tr>
<tr class="separator:a0436d3ae4dac7362742c35ea6a146fea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8d45b257f787efccb8a928176cc2c88"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#ab8d45b257f787efccb8a928176cc2c88">abm_PushSize</a>(Arena,  Size)&#160;&#160;&#160;abm_PushSize_(Arena, Size)</td></tr>
<tr class="memdesc:ab8d45b257f787efccb8a928176cc2c88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get memory of given size and return a pointer to memory.  <a href="../../d0/d0a/ab__memory_8h.html#ab8d45b257f787efccb8a928176cc2c88">More...</a><br /></td></tr>
<tr class="separator:ab8d45b257f787efccb8a928176cc2c88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89df166532e625eea593369a7997139d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#a89df166532e625eea593369a7997139d">abm_PushArray</a>(Arena,  Count,  Type)&#160;&#160;&#160;(Type*)abm_PushSize_(Arena, (Count)*sizeof(Type))</td></tr>
<tr class="memdesc:a89df166532e625eea593369a7997139d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get memory for an array of types specified.  <a href="../../d0/d0a/ab__memory_8h.html#a89df166532e625eea593369a7997139d">More...</a><br /></td></tr>
<tr class="separator:a89df166532e625eea593369a7997139d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a20bffb2c2335745a56275b6094b6dcad"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#a20bffb2c2335745a56275b6094b6dcad">abm_AllocateOsMemory</a> (void *Address, size_t Size)</td></tr>
<tr class="memdesc:a20bffb2c2335745a56275b6094b6dcad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get memory from the OS.  <a href="../../d0/d0a/ab__memory_8h.html#a20bffb2c2335745a56275b6094b6dcad">More...</a><br /></td></tr>
<tr class="separator:a20bffb2c2335745a56275b6094b6dcad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad393d506412ba1d8d6fe25e8e16253b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#ad393d506412ba1d8d6fe25e8e16253b4">abm_DeallocateOsMemory</a> (void *Address, size_t Size)</td></tr>
<tr class="memdesc:ad393d506412ba1d8d6fe25e8e16253b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return memory to the OS.  <a href="../../d0/d0a/ab__memory_8h.html#ad393d506412ba1d8d6fe25e8e16253b4">More...</a><br /></td></tr>
<tr class="separator:ad393d506412ba1d8d6fe25e8e16253b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f2fa70a405694492db91b26ed884207"><td class="memItemLeft" align="right" valign="top">memory_arena&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#a5f2fa70a405694492db91b26ed884207">abm_InitMemory</a> (void *Start, size_t Size)</td></tr>
<tr class="memdesc:a5f2fa70a405694492db91b26ed884207"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a memory_arena.  <a href="../../d0/d0a/ab__memory_8h.html#a5f2fa70a405694492db91b26ed884207">More...</a><br /></td></tr>
<tr class="separator:a5f2fa70a405694492db91b26ed884207"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ca432174a01c886b3c834cbb140c5ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#a8ca432174a01c886b3c834cbb140c5ab">abm_ResetMemory</a> (memory_arena *Memory)</td></tr>
<tr class="memdesc:a8ca432174a01c886b3c834cbb140c5ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete everything in a <code>memory_arena</code> and set the amount of memory used to 0.  <a href="../../d0/d0a/ab__memory_8h.html#a8ca432174a01c886b3c834cbb140c5ab">More...</a><br /></td></tr>
<tr class="separator:a8ca432174a01c886b3c834cbb140c5ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9061bfb19b910033ab211832bc593fed"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#a9061bfb19b910033ab211832bc593fed">abm_GetMemoryLeft</a> (memory_arena *Memory)</td></tr>
<tr class="memdesc:a9061bfb19b910033ab211832bc593fed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the amount of memory left in an arena.  <a href="../../d0/d0a/ab__memory_8h.html#a9061bfb19b910033ab211832bc593fed">More...</a><br /></td></tr>
<tr class="separator:a9061bfb19b910033ab211832bc593fed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77b6adde3ba40f7f3777bcc01c396ccd"><td class="memItemLeft" align="right" valign="top">temporary_memory&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#a77b6adde3ba40f7f3777bcc01c396ccd">abm_BeginTemporaryMemory</a> (memory_arena *Memory)</td></tr>
<tr class="memdesc:a77b6adde3ba40f7f3777bcc01c396ccd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates the next section of memory is scratch, and will be cleared quickly.  <a href="../../d0/d0a/ab__memory_8h.html#a77b6adde3ba40f7f3777bcc01c396ccd">More...</a><br /></td></tr>
<tr class="separator:a77b6adde3ba40f7f3777bcc01c396ccd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dbf22e067d85b9ad8422126755d23df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#a8dbf22e067d85b9ad8422126755d23df">abm_EndTemporaryMemory</a> (temporary_memory TempMem)</td></tr>
<tr class="memdesc:a8dbf22e067d85b9ad8422126755d23df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ends the section of temporary memory.  <a href="../../d0/d0a/ab__memory_8h.html#a8dbf22e067d85b9ad8422126755d23df">More...</a><br /></td></tr>
<tr class="separator:a8dbf22e067d85b9ad8422126755d23df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b0ab8d04e6309ae31b1b2f8282dc085"><td class="memItemLeft" align="right" valign="top">memory_arena&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#a1b0ab8d04e6309ae31b1b2f8282dc085">abm_CreateSubArena</a> (memory_arena *Memory, size_t Size)</td></tr>
<tr class="memdesc:a1b0ab8d04e6309ae31b1b2f8282dc085"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <code>memory_arena</code> inside an existing arena.  <a href="../../d0/d0a/ab__memory_8h.html#a1b0ab8d04e6309ae31b1b2f8282dc085">More...</a><br /></td></tr>
<tr class="separator:a1b0ab8d04e6309ae31b1b2f8282dc085"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Memory handling. </p>
<dl class="section author"><dt>Author</dt><dd>Amos Buchanan </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2020 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd><a href="https://opensource.org/licenses/MIT">MIT Public License</a></dd></dl>
<p>Getting and using blocks of memory, as oppossed to malloc/free anytime memory is desired. Works with Windows and Linux, with the OS specific implementation broken out into separate files. Generally, you grab a chunk of memory from the OS and use that chunk rather than constantly going out to the OS to get more when needed.</p>
<p>It is not advised to use the arena structs directly; the functions should be used to manipulate the memory.</p>
<p>The code here is heavily influenced by Casey Muratori and <a href="https://handmadehero.org/">Handmade Hero</a>.</p>
<p>Example Usage: </p><div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">size_t</span> MemorySize = <a class="code" href="../../d7/d05/ab__common_8h.html#a9e89c74d1fedd0a954107d7ab01481cc">Kilobytes</a>(150);</div>
<div class="line"><span class="keywordtype">void</span> *OsMemory = <a class="code" href="../../d0/d0a/ab__memory_8h.html#a20bffb2c2335745a56275b6094b6dcad">abm_AllocateOsMemory</a>(NULL, MemorySize);</div>
<div class="line">memory_arena MainMemory = <a class="code" href="../../d0/d0a/ab__memory_8h.html#a5f2fa70a405694492db91b26ed884207">abm_InitMemory</a>(OsMemory, MemorySize);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Begin initialization code here.</span></div>
<div class="line">my_struct *MyStruct = <a class="code" href="../../d0/d0a/ab__memory_8h.html#a0436d3ae4dac7362742c35ea6a146fea">abm_PushStruct</a>(&amp;MainMemory, my_struct);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> <a class="code" href="../../d7/d05/ab__common_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a> MyStructArrayLength = 50;</div>
<div class="line">my_struct *MyStructArray = <a class="code" href="../../d0/d0a/ab__memory_8h.html#a89df166532e625eea593369a7997139d">abm_PushArray</a>(&amp;MainMemory, my_struct, MyStructArrayLength);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">size_t</span> EmptyMemorySize = <a class="code" href="../../d7/d05/ab__common_8h.html#a9e89c74d1fedd0a954107d7ab01481cc">Kilobytes</a>(1);</div>
<div class="line"><span class="keywordtype">void</span> *EmptyMemory = <a class="code" href="../../d0/d0a/ab__memory_8h.html#ab8d45b257f787efccb8a928176cc2c88">abm_PushSize</a>(&amp;MainMemory, EmptyMemorySize);</div>
<div class="line"> </div>
<div class="line">memory_arena VolatileMemory = <a class="code" href="../../d0/d0a/ab__memory_8h.html#a1b0ab8d04e6309ae31b1b2f8282dc085">abm_CreateSubArena</a>(&amp;MainMemory, <a class="code" href="../../d7/d05/ab__common_8h.html#a9e89c74d1fedd0a954107d7ab01481cc">Kilobytes</a>(50));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// End initialization.</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">while</span>(isRunning)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="../../d0/d0a/ab__memory_8h.html#a8ca432174a01c886b3c834cbb140c5ab">abm_ResetMemory</a>(&amp;VolatileMemory);</div>
<div class="line"> </div>
<div class="line">    volatile_struct *VolatileStruct = PushStruct(&amp;VolatileMemory, volatile_struct);</div>
<div class="line">    <span class="comment">// Do Stuff Here.</span></div>
<div class="line"> </div>
<div class="line">    temporary_memory ScratchMemory = <a class="code" href="../../d0/d0a/ab__memory_8h.html#a77b6adde3ba40f7f3777bcc01c396ccd">abm_BeginTemporaryMemory</a>(&amp;VolatileMemory);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Use the ScratchMemory for something here.</span></div>
<div class="line"> </div>
<div class="line">    <a class="code" href="../../d0/d0a/ab__memory_8h.html#a8dbf22e067d85b9ad8422126755d23df">abm_EndTemporaryMemory</a>(ScratchMemory);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code" href="../../d0/d0a/ab__memory_8h.html#ad393d506412ba1d8d6fe25e8e16253b4">abm_DeallocateOsMemory</a>(OsMemory, MemorySize);</div>
</div><!-- fragment --><p>See also:</p><ul>
<li><a class="el" href="../../d3/d1f/ab__memory__linux_8h.html">ab_memory_linux.h</a></li>
<li><a class="el" href="../../de/d1e/ab__memory__win32_8h.html">ab_memory_win32.h</a></li>
</ul>
<h1>MIT License</h1>
<p><a href="https://opensource.org/licenses/MIT">MIT Public License</a></p>
<p>Copyright 2020 Amos Buchanan</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a89df166532e625eea593369a7997139d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89df166532e625eea593369a7997139d">&#9670;&nbsp;</a></span>abm_PushArray</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define abm_PushArray</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">Arena, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">Count, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">Type&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(Type*)abm_PushSize_(Arena, (Count)*sizeof(Type))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get memory for an array of types specified. </p>
<p>This will clear the memory to 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Arena</td><td>A pointer to a <code>memory_arena</code> to hold the array. </td></tr>
    <tr><td class="paramname">Count</td><td>Number of array elements to allocate. </td></tr>
    <tr><td class="paramname">Type</td><td>The type of array to allocate. Can be any type. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the first element in the array. </dd></dl>

</div>
</div>
<a id="ab8d45b257f787efccb8a928176cc2c88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8d45b257f787efccb8a928176cc2c88">&#9670;&nbsp;</a></span>abm_PushSize</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define abm_PushSize</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">Arena, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">Size&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;abm_PushSize_(Arena, Size)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get memory of given size and return a pointer to memory. </p>
<p>This will clear the memory to 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Arena</td><td>A pointer to the memory_arena. </td></tr>
    <tr><td class="paramname">Size</td><td><code>size_t</code> amount of memory to create. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>'void*` pointer to the start of the memory. </dd></dl>

</div>
</div>
<a id="a0436d3ae4dac7362742c35ea6a146fea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0436d3ae4dac7362742c35ea6a146fea">&#9670;&nbsp;</a></span>abm_PushStruct</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define abm_PushStruct</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">Arena, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">Type&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(Type*)abm_PushSize_(Arena, sizeof(Type))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get memory for the type or struct and return a pointer to the struct type. </p>
<p>This will clear the memory to 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Arena</td><td>A pointer to the memory arena. </td></tr>
    <tr><td class="paramname">Type</td><td>The struct type to allocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the struct type. </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a20bffb2c2335745a56275b6094b6dcad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20bffb2c2335745a56275b6094b6dcad">&#9670;&nbsp;</a></span>abm_AllocateOsMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* abm_AllocateOsMemory </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get memory from the OS. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Address</td><td>The start address of the memory. Generally used for debugging. </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of memory you want from the OS. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A void* pointer to the start of the memory; 0 if memory allocation failed. </dd></dl>

</div>
</div>
<a id="a77b6adde3ba40f7f3777bcc01c396ccd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77b6adde3ba40f7f3777bcc01c396ccd">&#9670;&nbsp;</a></span>abm_BeginTemporaryMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">temporary_memory abm_BeginTemporaryMemory </td>
          <td>(</td>
          <td class="paramtype">memory_arena *&#160;</td>
          <td class="paramname"><em>Memory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates the next section of memory is scratch, and will be cleared quickly. </p>
<p>This must be paired with <code><a class="el" href="../../d0/d0a/ab__memory_8h.html#a8dbf22e067d85b9ad8422126755d23df" title="Ends the section of temporary memory.">abm_EndTemporaryMemory()</a></code>. Memory used between <code>abm_BeginTemporyMemory()</code> and <code><a class="el" href="../../d0/d0a/ab__memory_8h.html#a8dbf22e067d85b9ad8422126755d23df" title="Ends the section of temporary memory.">abm_EndTemporaryMemory()</a></code> will be wiped. This is generally used for brief scratch memory that's needed within a single function, but is not otherwise needed.</p>
<p>Example Usage: </p><div class="fragment"><div class="line">temporary_memory TempMem = <a class="code" href="../../d0/d0a/ab__memory_8h.html#a77b6adde3ba40f7f3777bcc01c396ccd">abm_BeginTemporaryMemory</a>(&amp;MemoryArena);</div>
<div class="line"> </div>
<div class="line">my_struct *MyStruct = <a class="code" href="../../d0/d0a/ab__memory_8h.html#a0436d3ae4dac7362742c35ea6a146fea">abm_PushStruct</a>(&amp;MemoryArena, my_struct);</div>
<div class="line"><span class="comment">// Do some scratch work here, using the memory as normal.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Any memory used since abm_BeginTemporaryMemory() will be wiped out here.</span></div>
<div class="line"><a class="code" href="../../d0/d0a/ab__memory_8h.html#a8dbf22e067d85b9ad8422126755d23df">abm_EndTemporaryMemory</a>(TempMem);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Memory</td><td>A pointer to the <code>memory_arena</code> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <code>temporary_memory</code> struct that is used again to end the memory. </dd></dl>

</div>
</div>
<a id="a1b0ab8d04e6309ae31b1b2f8282dc085"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b0ab8d04e6309ae31b1b2f8282dc085">&#9670;&nbsp;</a></span>abm_CreateSubArena()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">memory_arena abm_CreateSubArena </td>
          <td>(</td>
          <td class="paramtype">memory_arena *&#160;</td>
          <td class="paramname"><em>Memory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a <code>memory_arena</code> inside an existing arena. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Memory</td><td>A pointer to the existing <code>memory_arena</code> within which to create a new arena. </td></tr>
    <tr><td class="paramname">Size</td><td>The amount of memory to use for the arena. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new <code>memory_arena</code> that may be used just as the parent arena. </dd></dl>

</div>
</div>
<a id="ad393d506412ba1d8d6fe25e8e16253b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad393d506412ba1d8d6fe25e8e16253b4">&#9670;&nbsp;</a></span>abm_DeallocateOsMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void abm_DeallocateOsMemory </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return memory to the OS. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Address</td><td>of the memory from the OS, the return value of <a class="el" href="../../d0/d0a/ab__memory_8h.html#a20bffb2c2335745a56275b6094b6dcad">abm_AllocateOsMemory()</a>. </td></tr>
    <tr><td class="paramname">Size</td><td>Size of the memory to return (Some OS's need this.), should be the same as the parameter from <code><a class="el" href="../../d0/d0a/ab__memory_8h.html#a20bffb2c2335745a56275b6094b6dcad" title="Get memory from the OS.">abm_AllocateOsMemory()</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8dbf22e067d85b9ad8422126755d23df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dbf22e067d85b9ad8422126755d23df">&#9670;&nbsp;</a></span>abm_EndTemporaryMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void abm_EndTemporaryMemory </td>
          <td>(</td>
          <td class="paramtype">temporary_memory&#160;</td>
          <td class="paramname"><em>TempMem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ends the section of temporary memory. </p>
<p>This will free all the memory used since <code><a class="el" href="../../d0/d0a/ab__memory_8h.html#a77b6adde3ba40f7f3777bcc01c396ccd" title="Indicates the next section of memory is scratch, and will be cleared quickly.">abm_BeginTemporaryMemory()</a></code>. See <a class="el" href="../../d0/d0a/ab__memory_8h.html#a77b6adde3ba40f7f3777bcc01c396ccd">abm_BeginTemporaryMemory()</a> for more details on usage.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TempMem</td><td>The <code>temporary_memory</code> struct created with <code><a class="el" href="../../d0/d0a/ab__memory_8h.html#a77b6adde3ba40f7f3777bcc01c396ccd" title="Indicates the next section of memory is scratch, and will be cleared quickly.">abm_BeginTemporaryMemory()</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9061bfb19b910033ab211832bc593fed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9061bfb19b910033ab211832bc593fed">&#9670;&nbsp;</a></span>abm_GetMemoryLeft()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t abm_GetMemoryLeft </td>
          <td>(</td>
          <td class="paramtype">memory_arena *&#160;</td>
          <td class="paramname"><em>Memory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the amount of memory left in an arena. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Memory</td><td>A pointer to the <code>memory_arena</code> to check. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The amount of unused memory in the arena. </dd></dl>

</div>
</div>
<a id="a5f2fa70a405694492db91b26ed884207"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f2fa70a405694492db91b26ed884207">&#9670;&nbsp;</a></span>abm_InitMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">memory_arena abm_InitMemory </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a memory_arena. </p>
<p>Create a new <code>memory_arena</code> object from the memory block in the OS. This may be the entire block requested, or part of one.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Start</td><td>The start of the memory block. </td></tr>
    <tr><td class="paramname">Size</td><td>The size of the memory arena. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new memory_arena. </dd></dl>

</div>
</div>
<a id="a8ca432174a01c886b3c834cbb140c5ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ca432174a01c886b3c834cbb140c5ab">&#9670;&nbsp;</a></span>abm_ResetMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void abm_ResetMemory </td>
          <td>(</td>
          <td class="paramtype">memory_arena *&#160;</td>
          <td class="paramname"><em>Memory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete everything in a <code>memory_arena</code> and set the amount of memory used to 0. </p>
<p>This is used to wipe out everything in a memory arena. This is usually used at the beginning of a control loop to clear the volatile memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Memory</td><td>The <code>memory_arena</code> to wipe. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="aab__common_8h_html_a9e89c74d1fedd0a954107d7ab01481cc"><div class="ttname"><a href="../../d7/d05/ab__common_8h.html#a9e89c74d1fedd0a954107d7ab01481cc">Kilobytes</a></div><div class="ttdeci">#define Kilobytes(num)</div><div class="ttdef"><b>Definition:</b> ab_common.h:45</div></div>
<div class="ttc" id="aab__memory_8h_html_ab8d45b257f787efccb8a928176cc2c88"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#ab8d45b257f787efccb8a928176cc2c88">abm_PushSize</a></div><div class="ttdeci">#define abm_PushSize(Arena, Size)</div><div class="ttdoc">Get memory of given size and return a pointer to memory.</div><div class="ttdef"><b>Definition:</b> ab_memory.h:120</div></div>
<div class="ttc" id="aab__memory_8h_html_a1b0ab8d04e6309ae31b1b2f8282dc085"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#a1b0ab8d04e6309ae31b1b2f8282dc085">abm_CreateSubArena</a></div><div class="ttdeci">memory_arena abm_CreateSubArena(memory_arena *Memory, size_t Size)</div><div class="ttdoc">Create a memory_arena inside an existing arena.</div></div>
<div class="ttc" id="aab__memory_8h_html_a89df166532e625eea593369a7997139d"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#a89df166532e625eea593369a7997139d">abm_PushArray</a></div><div class="ttdeci">#define abm_PushArray(Arena, Count, Type)</div><div class="ttdoc">Get memory for an array of types specified.</div><div class="ttdef"><b>Definition:</b> ab_memory.h:131</div></div>
<div class="ttc" id="aab__memory_8h_html_a0436d3ae4dac7362742c35ea6a146fea"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#a0436d3ae4dac7362742c35ea6a146fea">abm_PushStruct</a></div><div class="ttdeci">#define abm_PushStruct(Arena, Type)</div><div class="ttdoc">Get memory for the type or struct and return a pointer to the struct type.</div><div class="ttdef"><b>Definition:</b> ab_memory.h:110</div></div>
<div class="ttc" id="aab__memory_8h_html_a8dbf22e067d85b9ad8422126755d23df"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#a8dbf22e067d85b9ad8422126755d23df">abm_EndTemporaryMemory</a></div><div class="ttdeci">void abm_EndTemporaryMemory(temporary_memory TempMem)</div><div class="ttdoc">Ends the section of temporary memory.</div></div>
<div class="ttc" id="aab__common_8h_html_afaa62991928fb9fb18ff0db62a040aba"><div class="ttname"><a href="../../d7/d05/ab__common_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a></div><div class="ttdeci">uint32_t u32</div><div class="ttdef"><b>Definition:</b> ab_common.h:68</div></div>
<div class="ttc" id="aab__memory_8h_html_a20bffb2c2335745a56275b6094b6dcad"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#a20bffb2c2335745a56275b6094b6dcad">abm_AllocateOsMemory</a></div><div class="ttdeci">void * abm_AllocateOsMemory(void *Address, size_t Size)</div><div class="ttdoc">Get memory from the OS.</div></div>
<div class="ttc" id="aab__memory_8h_html_ad393d506412ba1d8d6fe25e8e16253b4"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#ad393d506412ba1d8d6fe25e8e16253b4">abm_DeallocateOsMemory</a></div><div class="ttdeci">void abm_DeallocateOsMemory(void *Address, size_t Size)</div><div class="ttdoc">Return memory to the OS.</div></div>
<div class="ttc" id="aab__memory_8h_html_a5f2fa70a405694492db91b26ed884207"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#a5f2fa70a405694492db91b26ed884207">abm_InitMemory</a></div><div class="ttdeci">memory_arena abm_InitMemory(void *Start, size_t Size)</div><div class="ttdoc">Initialize a memory_arena.</div></div>
<div class="ttc" id="aab__memory_8h_html_a77b6adde3ba40f7f3777bcc01c396ccd"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#a77b6adde3ba40f7f3777bcc01c396ccd">abm_BeginTemporaryMemory</a></div><div class="ttdeci">temporary_memory abm_BeginTemporaryMemory(memory_arena *Memory)</div><div class="ttdoc">Indicates the next section of memory is scratch, and will be cleared quickly.</div></div>
<div class="ttc" id="aab__memory_8h_html_a8ca432174a01c886b3c834cbb140c5ab"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#a8ca432174a01c886b3c834cbb140c5ab">abm_ResetMemory</a></div><div class="ttdeci">void abm_ResetMemory(memory_arena *Memory)</div><div class="ttdoc">Delete everything in a memory_arena and set the amount of memory used to 0.</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
