<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Amos&#39; Common Libraries: ab_memory.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Amos&#39; Common Libraries
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Amos&#39; Libraries</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ab_memory.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Memory handling.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d7/d05/ab__common_8h_source.html">ab_common.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ab_memory.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/d5f/ab__memory_8h__incl.png" border="0" usemap="#aab__memory_8h" alt=""/></div>
<map name="ab__memory_8h" id="ab__memory_8h">
<area shape="rect" title="Memory handling." alt="" coords="33,5,134,32"/>
<area shape="rect" href="../../d7/d05/ab__common_8h.html" title="Common macros and typedefs." alt="" coords="31,80,135,107"/>
<area shape="rect" title=" " alt="" coords="5,155,71,181"/>
<area shape="rect" title=" " alt="" coords="95,155,163,181"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/d8c/ab__memory_8h__dep__incl.png" border="0" usemap="#aab__memory_8hdep" alt=""/></div>
<map name="ab__memory_8hdep" id="ab__memory_8hdep">
<area shape="rect" title="Memory handling." alt="" coords="82,5,183,32"/>
<area shape="rect" href="../../d2/d40/ab__json_8h.html" title="JSON functions, mostly used by pre&#45;generated files." alt="" coords="116,155,194,181"/>
<area shape="rect" href="../../d4/d4b/ab__logger_8h.html" title="Network Logger." alt="" coords="24,80,113,107"/>
<area shape="rect" href="../../dc/dd8/ab__loggerclient_8h.html" title="Basic Logger Client." alt="" coords="138,80,258,107"/>
<area shape="rect" href="../../d0/d57/ab__string_8h.html" title="Using string fragments, usually but not exclusively sections of larger strings." alt="" coords="282,80,369,107"/>
</map>
</div>
</div>
<p><a href="../../d0/d0a/ab__memory_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ade8a4ab9a8d221e715d2a0733dd7128f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#ade8a4ab9a8d221e715d2a0733dd7128f">mem_PushStruct</a>(Arena,  Type)&#160;&#160;&#160;(Type*)mem_PushSize_(Arena, sizeof(Type))</td></tr>
<tr class="memdesc:ade8a4ab9a8d221e715d2a0733dd7128f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get memory for the type or struct and return a pointer to the struct type.  <a href="../../d0/d0a/ab__memory_8h.html#ade8a4ab9a8d221e715d2a0733dd7128f">More...</a><br /></td></tr>
<tr class="separator:ade8a4ab9a8d221e715d2a0733dd7128f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2630c25d21e17ac2b347ff792cc5dbd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#ac2630c25d21e17ac2b347ff792cc5dbd">mem_PushSize</a>(Arena,  Size)&#160;&#160;&#160;mem_PushSize_(Arena, Size)</td></tr>
<tr class="memdesc:ac2630c25d21e17ac2b347ff792cc5dbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get memory of given size and return a pointer to memory.  <a href="../../d0/d0a/ab__memory_8h.html#ac2630c25d21e17ac2b347ff792cc5dbd">More...</a><br /></td></tr>
<tr class="separator:ac2630c25d21e17ac2b347ff792cc5dbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae626c2862d77390a2677b8819a09dd1e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#ae626c2862d77390a2677b8819a09dd1e">mem_PushArray</a>(Arena,  Count,  Type)&#160;&#160;&#160;(Type*)mem_PushSize_(Arena, (Count)*sizeof(Type))</td></tr>
<tr class="memdesc:ae626c2862d77390a2677b8819a09dd1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get memory for an array of types specified.  <a href="../../d0/d0a/ab__memory_8h.html#ae626c2862d77390a2677b8819a09dd1e">More...</a><br /></td></tr>
<tr class="separator:ae626c2862d77390a2677b8819a09dd1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a65f300a0fc29f0fb26f7baa536eeef16"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#a65f300a0fc29f0fb26f7baa536eeef16">mem_AllocateOsMemory</a> (void *Address, size_t Size)</td></tr>
<tr class="memdesc:a65f300a0fc29f0fb26f7baa536eeef16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get memory from the OS.  <a href="../../d0/d0a/ab__memory_8h.html#a65f300a0fc29f0fb26f7baa536eeef16">More...</a><br /></td></tr>
<tr class="separator:a65f300a0fc29f0fb26f7baa536eeef16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa817a02fd268b12b4ca75f15bfe6379c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#aa817a02fd268b12b4ca75f15bfe6379c">mem_DeallocateOsMemory</a> (void *Address, size_t Size)</td></tr>
<tr class="memdesc:aa817a02fd268b12b4ca75f15bfe6379c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return memory to the OS.  <a href="../../d0/d0a/ab__memory_8h.html#aa817a02fd268b12b4ca75f15bfe6379c">More...</a><br /></td></tr>
<tr class="separator:aa817a02fd268b12b4ca75f15bfe6379c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dd694713416bf4f1fc1f0f1433440e0"><td class="memItemLeft" align="right" valign="top">memory_arena&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#a3dd694713416bf4f1fc1f0f1433440e0">mem_InitMemory</a> (void *Start, size_t Size)</td></tr>
<tr class="memdesc:a3dd694713416bf4f1fc1f0f1433440e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a memory_arena.  <a href="../../d0/d0a/ab__memory_8h.html#a3dd694713416bf4f1fc1f0f1433440e0">More...</a><br /></td></tr>
<tr class="separator:a3dd694713416bf4f1fc1f0f1433440e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a292359d189043396cc92d7c0de05fbec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#a292359d189043396cc92d7c0de05fbec">mem_ResetMemory</a> (memory_arena *Memory)</td></tr>
<tr class="memdesc:a292359d189043396cc92d7c0de05fbec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete everything in a <code>memory_arena</code> and set the amount of memory used to 0.  <a href="../../d0/d0a/ab__memory_8h.html#a292359d189043396cc92d7c0de05fbec">More...</a><br /></td></tr>
<tr class="separator:a292359d189043396cc92d7c0de05fbec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada89f9419c002dbe71315a84e72444a1"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#ada89f9419c002dbe71315a84e72444a1">mem_GetMemoryLeft</a> (memory_arena *Memory)</td></tr>
<tr class="memdesc:ada89f9419c002dbe71315a84e72444a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the amount of memory left in an arena.  <a href="../../d0/d0a/ab__memory_8h.html#ada89f9419c002dbe71315a84e72444a1">More...</a><br /></td></tr>
<tr class="separator:ada89f9419c002dbe71315a84e72444a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21e3b35f1c8dcdb00715eacb975da0b2"><td class="memItemLeft" align="right" valign="top">temporary_memory&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#a21e3b35f1c8dcdb00715eacb975da0b2">mem_BeginTemporaryMemory</a> (memory_arena *Memory)</td></tr>
<tr class="memdesc:a21e3b35f1c8dcdb00715eacb975da0b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates the next section of memory is scratch, and will be cleared quickly.  <a href="../../d0/d0a/ab__memory_8h.html#a21e3b35f1c8dcdb00715eacb975da0b2">More...</a><br /></td></tr>
<tr class="separator:a21e3b35f1c8dcdb00715eacb975da0b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d43731b8fe9679b5d342cf3c2c77e24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#a3d43731b8fe9679b5d342cf3c2c77e24">mem_EndTemporaryMemory</a> (temporary_memory TempMem)</td></tr>
<tr class="memdesc:a3d43731b8fe9679b5d342cf3c2c77e24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ends the section of temporary memory.  <a href="../../d0/d0a/ab__memory_8h.html#a3d43731b8fe9679b5d342cf3c2c77e24">More...</a><br /></td></tr>
<tr class="separator:a3d43731b8fe9679b5d342cf3c2c77e24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac527aab775805919b34095e3f0e0830"><td class="memItemLeft" align="right" valign="top">memory_arena&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/ab__memory_8h.html#aac527aab775805919b34095e3f0e0830">mem_CreateSubArena</a> (memory_arena *Memory, size_t Size)</td></tr>
<tr class="memdesc:aac527aab775805919b34095e3f0e0830"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <code>memory_arena</code> inside an existing arena.  <a href="../../d0/d0a/ab__memory_8h.html#aac527aab775805919b34095e3f0e0830">More...</a><br /></td></tr>
<tr class="separator:aac527aab775805919b34095e3f0e0830"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Memory handling. </p>
<dl class="section author"><dt>Author</dt><dd>Amos Buchanan </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2020</dd></dl>
<p>Getting and using blocks of memory, as oppossed to malloc/free anytime memory is desired. Works with Windows and Linux, with the OS specific implementation broken out into separate files. Generally, you grab a chunk of memory from the OS and use that chunk rather than constantly going out to the OS to get more when needed. To pull in for the appropriate OS, define either <code>_LINUX</code> or <code>_WINDOWS</code> in your build string or early in your project. (NOTE: Visual Studio adds a <code>_WINDOWS</code> define by default to C++ projects.</p>
<p>The use case for this library fits with the two methods of memory used in my projects:</p><ul>
<li>An initial block of memory that is initialized during setup, and not added to afterwards.</li>
<li>Scratch memory that is wiped out at the beginning of each control loop.</li>
</ul>
<p>At this time, there isn't really functionality for freeing and re-using memory. It's generally not necessary in the use cases I current have, though if this changes that functionality will be added.</p>
<p>This is a single-file library. You may include it as a header just as any other. Add the following define to include the source <em>once</em> per project:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define MEMORY_SRC</span></div>
<div class="line"><span class="preprocessor">#include &quot;ab_memory.h&quot;</span></div>
</div><!-- fragment --><p>It is not advised to use the arena structs directly; the functions should be used to manipulate the memory.</p>
<p>The code here is heavily influenced by Casey Muratori and <a href="https://handmadehero.org/">Handmade Hero</a>.</p>
<p>Example Usage: </p><div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">size_t</span> MemorySize = <a class="code" href="../../d7/d05/ab__common_8h.html#a9e89c74d1fedd0a954107d7ab01481cc">Kilobytes</a>(150);</div>
<div class="line"><span class="keywordtype">void</span> *OsMemory = <a class="code" href="../../d0/d0a/ab__memory_8h.html#a65f300a0fc29f0fb26f7baa536eeef16">mem_AllocateOsMemory</a>(NULL, MemorySize);</div>
<div class="line">memory_arena MainMemory = <a class="code" href="../../d0/d0a/ab__memory_8h.html#a3dd694713416bf4f1fc1f0f1433440e0">mem_InitMemory</a>(OsMemory, MemorySize);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Begin initialization code here.</span></div>
<div class="line">my_struct *MyStruct = <a class="code" href="../../d0/d0a/ab__memory_8h.html#ade8a4ab9a8d221e715d2a0733dd7128f">mem_PushStruct</a>(&amp;MainMemory, my_struct);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> <a class="code" href="../../d7/d05/ab__common_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a> MyStructArrayLength = 50;</div>
<div class="line">my_struct *MyStructArray = <a class="code" href="../../d0/d0a/ab__memory_8h.html#ae626c2862d77390a2677b8819a09dd1e">mem_PushArray</a>(&amp;MainMemory, my_struct, MyStructArrayLength);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">size_t</span> EmptyMemorySize = <a class="code" href="../../d7/d05/ab__common_8h.html#a9e89c74d1fedd0a954107d7ab01481cc">Kilobytes</a>(1);</div>
<div class="line"><span class="keywordtype">void</span> *EmptyMemory = <a class="code" href="../../d0/d0a/ab__memory_8h.html#ac2630c25d21e17ac2b347ff792cc5dbd">mem_PushSize</a>(&amp;MainMemory, EmptyMemorySize);</div>
<div class="line"> </div>
<div class="line">memory_arena VolatileMemory = <a class="code" href="../../d0/d0a/ab__memory_8h.html#aac527aab775805919b34095e3f0e0830">mem_CreateSubArena</a>(&amp;MainMemory, <a class="code" href="../../d7/d05/ab__common_8h.html#a9e89c74d1fedd0a954107d7ab01481cc">Kilobytes</a>(50));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// End initialization.</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">while</span>(isRunning)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="../../d0/d0a/ab__memory_8h.html#a292359d189043396cc92d7c0de05fbec">mem_ResetMemory</a>(&amp;VolatileMemory);</div>
<div class="line"> </div>
<div class="line">    volatile_struct *VolatileStruct = PushStruct(&amp;VolatileMemory, volatile_struct);</div>
<div class="line">    <span class="comment">// Do Stuff Here.</span></div>
<div class="line"> </div>
<div class="line">    temporary_memory ScratchMemory = <a class="code" href="../../d0/d0a/ab__memory_8h.html#a21e3b35f1c8dcdb00715eacb975da0b2">mem_BeginTemporaryMemory</a>(&amp;VolatileMemory);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Use the ScratchMemory for something here.</span></div>
<div class="line"> </div>
<div class="line">    <a class="code" href="../../d0/d0a/ab__memory_8h.html#a3d43731b8fe9679b5d342cf3c2c77e24">mem_EndTemporaryMemory</a>(ScratchMemory);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code" href="../../d0/d0a/ab__memory_8h.html#aa817a02fd268b12b4ca75f15bfe6379c">mem_DeallocateOsMemory</a>(OsMemory, MemorySize);</div>
</div><!-- fragment --><p>See also:</p><ul>
<li><a class="el" href="../../d3/d1f/ab__memory__linux_8h.html">ab_memory_linux.h</a></li>
<li><a class="el" href="../../de/d1e/ab__memory__win32_8h.html">ab_memory_win32.h</a> </li>
</ul>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ae626c2862d77390a2677b8819a09dd1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae626c2862d77390a2677b8819a09dd1e">&#9670;&nbsp;</a></span>mem_PushArray</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define mem_PushArray</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">Arena, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">Count, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">Type&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(Type*)mem_PushSize_(Arena, (Count)*sizeof(Type))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get memory for an array of types specified. </p>
<p>This will clear the memory to 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Arena</td><td>A pointer to a <code>memory_arena</code> to hold the array. </td></tr>
    <tr><td class="paramname">Count</td><td>Number of array elements to allocate. </td></tr>
    <tr><td class="paramname">Type</td><td>The type of array to allocate. Can be any type. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the first element in the array. </dd></dl>

</div>
</div>
<a id="ac2630c25d21e17ac2b347ff792cc5dbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2630c25d21e17ac2b347ff792cc5dbd">&#9670;&nbsp;</a></span>mem_PushSize</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define mem_PushSize</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">Arena, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">Size&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;mem_PushSize_(Arena, Size)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get memory of given size and return a pointer to memory. </p>
<p>This will clear the memory to 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Arena</td><td>A pointer to the memory_arena. </td></tr>
    <tr><td class="paramname">Size</td><td><code>size_t</code> amount of memory to create. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>'void*` pointer to the start of the memory. </dd></dl>

</div>
</div>
<a id="ade8a4ab9a8d221e715d2a0733dd7128f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade8a4ab9a8d221e715d2a0733dd7128f">&#9670;&nbsp;</a></span>mem_PushStruct</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define mem_PushStruct</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">Arena, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">Type&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(Type*)mem_PushSize_(Arena, sizeof(Type))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get memory for the type or struct and return a pointer to the struct type. </p>
<p>This will clear the memory to 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Arena</td><td>A pointer to the memory arena. </td></tr>
    <tr><td class="paramname">Type</td><td>The struct type to allocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the struct type. </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a65f300a0fc29f0fb26f7baa536eeef16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65f300a0fc29f0fb26f7baa536eeef16">&#9670;&nbsp;</a></span>mem_AllocateOsMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* mem_AllocateOsMemory </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get memory from the OS. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Address</td><td>The start address of the memory. Generally used for debugging. </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of memory you want from the OS. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A void* pointer to the start of the memory; 0 if memory allocation failed. </dd></dl>

</div>
</div>
<a id="a21e3b35f1c8dcdb00715eacb975da0b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21e3b35f1c8dcdb00715eacb975da0b2">&#9670;&nbsp;</a></span>mem_BeginTemporaryMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">temporary_memory mem_BeginTemporaryMemory </td>
          <td>(</td>
          <td class="paramtype">memory_arena *&#160;</td>
          <td class="paramname"><em>Memory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates the next section of memory is scratch, and will be cleared quickly. </p>
<p>This must be paired with <code><a class="el" href="../../d0/d0a/ab__memory_8h.html#a3d43731b8fe9679b5d342cf3c2c77e24" title="Ends the section of temporary memory.">mem_EndTemporaryMemory()</a></code>. Memory used between <code>mem_BeginTemporyMemory()</code> and <code><a class="el" href="../../d0/d0a/ab__memory_8h.html#a3d43731b8fe9679b5d342cf3c2c77e24" title="Ends the section of temporary memory.">mem_EndTemporaryMemory()</a></code> will be wiped. This is generally used for brief scratch memory that's needed within a single function, but is not otherwise needed.</p>
<p>Example Usage: </p><div class="fragment"><div class="line">temporary_memory TempMem = <a class="code" href="../../d0/d0a/ab__memory_8h.html#a21e3b35f1c8dcdb00715eacb975da0b2">mem_BeginTemporaryMemory</a>(&amp;MemoryArena);</div>
<div class="line"> </div>
<div class="line">my_struct *MyStruct = <a class="code" href="../../d0/d0a/ab__memory_8h.html#ade8a4ab9a8d221e715d2a0733dd7128f">mem_PushStruct</a>(&amp;MemoryArena, my_struct);</div>
<div class="line"><span class="comment">// Do some scratch work here, using the memory as normal.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Any memory used since mem_BeginTemporaryMemory() will be wiped out here.</span></div>
<div class="line"><a class="code" href="../../d0/d0a/ab__memory_8h.html#a3d43731b8fe9679b5d342cf3c2c77e24">mem_EndTemporaryMemory</a>(TempMem);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Memory</td><td>A pointer to the <code>memory_arena</code> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <code>temporary_memory</code> struct that is used again to end the memory. </dd></dl>

</div>
</div>
<a id="aac527aab775805919b34095e3f0e0830"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac527aab775805919b34095e3f0e0830">&#9670;&nbsp;</a></span>mem_CreateSubArena()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">memory_arena mem_CreateSubArena </td>
          <td>(</td>
          <td class="paramtype">memory_arena *&#160;</td>
          <td class="paramname"><em>Memory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a <code>memory_arena</code> inside an existing arena. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Memory</td><td>A pointer to the existing <code>memory_arena</code> within which to create a new arena. </td></tr>
    <tr><td class="paramname">Size</td><td>The amount of memory to use for the arena. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new <code>memory_arena</code> that may be used just as the parent arena. </dd></dl>

</div>
</div>
<a id="aa817a02fd268b12b4ca75f15bfe6379c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa817a02fd268b12b4ca75f15bfe6379c">&#9670;&nbsp;</a></span>mem_DeallocateOsMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mem_DeallocateOsMemory </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return memory to the OS. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Address</td><td>of the memory from the OS, the return value of <a class="el" href="../../d0/d0a/ab__memory_8h.html#a65f300a0fc29f0fb26f7baa536eeef16">mem_AllocateOsMemory()</a>. </td></tr>
    <tr><td class="paramname">Size</td><td>Size of the memory to return (Some OS's need this.), should be the same as the parameter from <code><a class="el" href="../../d0/d0a/ab__memory_8h.html#a65f300a0fc29f0fb26f7baa536eeef16" title="Get memory from the OS.">mem_AllocateOsMemory()</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3d43731b8fe9679b5d342cf3c2c77e24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d43731b8fe9679b5d342cf3c2c77e24">&#9670;&nbsp;</a></span>mem_EndTemporaryMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mem_EndTemporaryMemory </td>
          <td>(</td>
          <td class="paramtype">temporary_memory&#160;</td>
          <td class="paramname"><em>TempMem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ends the section of temporary memory. </p>
<p>This will free all the memory used since <code><a class="el" href="../../d0/d0a/ab__memory_8h.html#a21e3b35f1c8dcdb00715eacb975da0b2" title="Indicates the next section of memory is scratch, and will be cleared quickly.">mem_BeginTemporaryMemory()</a></code>. See <a class="el" href="../../d0/d0a/ab__memory_8h.html#a21e3b35f1c8dcdb00715eacb975da0b2">mem_BeginTemporaryMemory()</a> for more details on usage.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TempMem</td><td>The <code>temporary_memory</code> struct created with <code><a class="el" href="../../d0/d0a/ab__memory_8h.html#a21e3b35f1c8dcdb00715eacb975da0b2" title="Indicates the next section of memory is scratch, and will be cleared quickly.">mem_BeginTemporaryMemory()</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ada89f9419c002dbe71315a84e72444a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada89f9419c002dbe71315a84e72444a1">&#9670;&nbsp;</a></span>mem_GetMemoryLeft()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t mem_GetMemoryLeft </td>
          <td>(</td>
          <td class="paramtype">memory_arena *&#160;</td>
          <td class="paramname"><em>Memory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the amount of memory left in an arena. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Memory</td><td>A pointer to the <code>memory_arena</code> to check. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The amount of unused memory in the arena. </dd></dl>

</div>
</div>
<a id="a3dd694713416bf4f1fc1f0f1433440e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dd694713416bf4f1fc1f0f1433440e0">&#9670;&nbsp;</a></span>mem_InitMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">memory_arena mem_InitMemory </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a memory_arena. </p>
<p>Create a new <code>memory_arena</code> object from the memory block in the OS. This may be the entire block requested, or part of one.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Start</td><td>The start of the memory block. </td></tr>
    <tr><td class="paramname">Size</td><td>The size of the memory arena. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new memory_arena. </dd></dl>

</div>
</div>
<a id="a292359d189043396cc92d7c0de05fbec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a292359d189043396cc92d7c0de05fbec">&#9670;&nbsp;</a></span>mem_ResetMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mem_ResetMemory </td>
          <td>(</td>
          <td class="paramtype">memory_arena *&#160;</td>
          <td class="paramname"><em>Memory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete everything in a <code>memory_arena</code> and set the amount of memory used to 0. </p>
<p>This is used to wipe out everything in a memory arena. This is usually used at the beginning of a control loop to clear the volatile memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Memory</td><td>The <code>memory_arena</code> to wipe. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="aab__memory_8h_html_aac527aab775805919b34095e3f0e0830"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#aac527aab775805919b34095e3f0e0830">mem_CreateSubArena</a></div><div class="ttdeci">memory_arena mem_CreateSubArena(memory_arena *Memory, size_t Size)</div><div class="ttdoc">Create a memory_arena inside an existing arena.</div></div>
<div class="ttc" id="aab__common_8h_html_a9e89c74d1fedd0a954107d7ab01481cc"><div class="ttname"><a href="../../d7/d05/ab__common_8h.html#a9e89c74d1fedd0a954107d7ab01481cc">Kilobytes</a></div><div class="ttdeci">#define Kilobytes(num)</div><div class="ttdef"><b>Definition:</b> ab_common.h:33</div></div>
<div class="ttc" id="aab__memory_8h_html_ae626c2862d77390a2677b8819a09dd1e"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#ae626c2862d77390a2677b8819a09dd1e">mem_PushArray</a></div><div class="ttdeci">#define mem_PushArray(Arena, Count, Type)</div><div class="ttdoc">Get memory for an array of types specified.</div><div class="ttdef"><b>Definition:</b> ab_memory.h:132</div></div>
<div class="ttc" id="aab__memory_8h_html_a3dd694713416bf4f1fc1f0f1433440e0"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#a3dd694713416bf4f1fc1f0f1433440e0">mem_InitMemory</a></div><div class="ttdeci">memory_arena mem_InitMemory(void *Start, size_t Size)</div><div class="ttdoc">Initialize a memory_arena.</div></div>
<div class="ttc" id="aab__memory_8h_html_a65f300a0fc29f0fb26f7baa536eeef16"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#a65f300a0fc29f0fb26f7baa536eeef16">mem_AllocateOsMemory</a></div><div class="ttdeci">void * mem_AllocateOsMemory(void *Address, size_t Size)</div><div class="ttdoc">Get memory from the OS.</div></div>
<div class="ttc" id="aab__common_8h_html_afaa62991928fb9fb18ff0db62a040aba"><div class="ttname"><a href="../../d7/d05/ab__common_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a></div><div class="ttdeci">uint32_t u32</div><div class="ttdef"><b>Definition:</b> ab_common.h:56</div></div>
<div class="ttc" id="aab__memory_8h_html_ac2630c25d21e17ac2b347ff792cc5dbd"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#ac2630c25d21e17ac2b347ff792cc5dbd">mem_PushSize</a></div><div class="ttdeci">#define mem_PushSize(Arena, Size)</div><div class="ttdoc">Get memory of given size and return a pointer to memory.</div><div class="ttdef"><b>Definition:</b> ab_memory.h:121</div></div>
<div class="ttc" id="aab__memory_8h_html_aa817a02fd268b12b4ca75f15bfe6379c"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#aa817a02fd268b12b4ca75f15bfe6379c">mem_DeallocateOsMemory</a></div><div class="ttdeci">void mem_DeallocateOsMemory(void *Address, size_t Size)</div><div class="ttdoc">Return memory to the OS.</div></div>
<div class="ttc" id="aab__memory_8h_html_a21e3b35f1c8dcdb00715eacb975da0b2"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#a21e3b35f1c8dcdb00715eacb975da0b2">mem_BeginTemporaryMemory</a></div><div class="ttdeci">temporary_memory mem_BeginTemporaryMemory(memory_arena *Memory)</div><div class="ttdoc">Indicates the next section of memory is scratch, and will be cleared quickly.</div></div>
<div class="ttc" id="aab__memory_8h_html_a292359d189043396cc92d7c0de05fbec"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#a292359d189043396cc92d7c0de05fbec">mem_ResetMemory</a></div><div class="ttdeci">void mem_ResetMemory(memory_arena *Memory)</div><div class="ttdoc">Delete everything in a memory_arena and set the amount of memory used to 0.</div></div>
<div class="ttc" id="aab__memory_8h_html_a3d43731b8fe9679b5d342cf3c2c77e24"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#a3d43731b8fe9679b5d342cf3c2c77e24">mem_EndTemporaryMemory</a></div><div class="ttdeci">void mem_EndTemporaryMemory(temporary_memory TempMem)</div><div class="ttdoc">Ends the section of temporary memory.</div></div>
<div class="ttc" id="aab__memory_8h_html_ade8a4ab9a8d221e715d2a0733dd7128f"><div class="ttname"><a href="../../d0/d0a/ab__memory_8h.html#ade8a4ab9a8d221e715d2a0733dd7128f">mem_PushStruct</a></div><div class="ttdeci">#define mem_PushStruct(Arena, Type)</div><div class="ttdoc">Get memory for the type or struct and return a pointer to the struct type.</div><div class="ttdef"><b>Definition:</b> ab_memory.h:111</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
