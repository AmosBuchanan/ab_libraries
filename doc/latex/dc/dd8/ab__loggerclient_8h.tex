\hypertarget{ab__loggerclient_8h}{}\doxysection{ab\+\_\+loggerclient.\+h File Reference}
\label{ab__loggerclient_8h}\index{ab\_loggerclient.h@{ab\_loggerclient.h}}


Basic Logger Client.  


{\ttfamily \#include \char`\"{}ab\+\_\+common.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ab\+\_\+memory.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}czmq.\+h\char`\"{}}\newline
Include dependency graph for ab\+\_\+loggerclient.\+h\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=277pt]{d6/d14/ab__loggerclient_8h__incl}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structlc__message}{lc\+\_\+message}}
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef void($\ast$ \mbox{\hyperlink{ab__loggerclient_8h_ae447ebb43b063b77ad8be4bc630752ea}{log\+\_\+function}}) (\mbox{\hyperlink{structlc__message}{lc\+\_\+message}} $\ast$Message, char $\ast$Endpoint\+Name, \mbox{\hyperlink{ab__common_8h_a70e369648385b50f2d0588e8e8745275}{b8}} is\+Pause, \mbox{\hyperlink{ab__common_8h_a70e369648385b50f2d0588e8e8745275}{b8}} is\+Quiet, F\+I\+LE $\ast$File\+Pointer)
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
lc\+\_\+client $\ast$ \mbox{\hyperlink{ab__loggerclient_8h_ac0c57a675621511fbe9f689133153026}{lc\+\_\+\+Initialize}} (memory\+\_\+arena $\ast$Memory, \mbox{\hyperlink{ab__common_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}} Max\+Endpoints)
\begin{DoxyCompactList}\small\item\em Initialize a new client. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ab__common_8h_ae9b1af5c037e57a98884758875d3a7c4}{s32}} \mbox{\hyperlink{ab__loggerclient_8h_ac04c0ddd919205b976187626416eb72f}{lc\+\_\+\+Add\+Endpoint}} (lc\+\_\+client $\ast$Client, char const $\ast$Label, char const $\ast$Endpoint)
\begin{DoxyCompactList}\small\item\em Adds a new endpoint to the client. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ab__loggerclient_8h_aaf1e1aebf452562ea45cd7e3448c0343}{lc\+\_\+\+Remove\+Endpoint}} (lc\+\_\+client $\ast$Client, char const $\ast$Label)
\begin{DoxyCompactList}\small\item\em Not currently implemented. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ab__loggerclient_8h_a763a2979fb08e8e3d5e60d00c0fdd91c}{lc\+\_\+\+Remove\+Endpoint}} (lc\+\_\+client $\ast$Client, \mbox{\hyperlink{ab__common_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}} Index)
\begin{DoxyCompactList}\small\item\em Not currently implemented. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ab__loggerclient_8h_a7689fa737decb7131d5e2d35cbfdfaf0}{lc\+\_\+\+Set\+File}} (lc\+\_\+client $\ast$Client, char const $\ast$Filename)
\begin{DoxyCompactList}\small\item\em set output file. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ab__loggerclient_8h_ac0d9dbe6724615cc950f36bb2b754fa2}{lc\+\_\+\+Clear\+File}} (lc\+\_\+client $\ast$Client)
\begin{DoxyCompactList}\small\item\em Closes the output file. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ab__loggerclient_8h_aaca5d829482918e2ed2cc471b125555d}{lc\+\_\+\+Set\+Quiet}} (lc\+\_\+client $\ast$Client, \mbox{\hyperlink{ab__common_8h_a70e369648385b50f2d0588e8e8745275}{b8}} do\+Quiet)
\begin{DoxyCompactList}\small\item\em Set to discontinue output to stderr. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ab__loggerclient_8h_aecbe2028770d0e505aec944870b9f91b}{lc\+\_\+\+Set\+Pause}} (lc\+\_\+client $\ast$Client, \mbox{\hyperlink{ab__common_8h_a70e369648385b50f2d0588e8e8745275}{b8}} do\+Pause)
\begin{DoxyCompactList}\small\item\em Stop all incomming log messages. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ab__loggerclient_8h_aa5a0bbd1987e475ac52efb8e9ab9e421}{lc\+\_\+\+Shutdown}} (lc\+\_\+client $\ast$Client)
\begin{DoxyCompactList}\small\item\em Shutdown the client. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Basic Logger Client. 

\begin{DoxyAuthor}{Author}
Amos Buchanan 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
2020
\end{DoxyDate}
An example of how to subscribes to a logger created in {\ttfamily \mbox{\hyperlink{ab__logger_8h}{ab\+\_\+logger.\+h}}}. It also serves as a client that is usable on its own. This may subscribe to multiple loggers at different endpoints. By default it will print the log messages to stderr, but this is configurable. You can also set a filename to write all log messages.

The client runs in a background thread to constantly retrieve and print messages from any logger it is subscribed to.

This is a single-\/file-\/library. You may include the file anywhere in your source. Only once in your code, define the following\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#define AB\_LOGGERCLIENT\_SRC}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}ab\_loggerclient.h"{}}}
\end{DoxyCode}


This will include the source.

example usage\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{void} *OsMemory = \mbox{\hyperlink{ab__memory_8h_a65f300a0fc29f0fb26f7baa536eeef16}{mem\_AllocateOsMemory}}(NULL, \mbox{\hyperlink{ab__common_8h_a9e89c74d1fedd0a954107d7ab01481cc}{Kilobytes}}(5));}
\DoxyCodeLine{memory\_arena Memory = \mbox{\hyperlink{ab__memory_8h_a3dd694713416bf4f1fc1f0f1433440e0}{mem\_InitMemory}}(OsMemory, \mbox{\hyperlink{ab__common_8h_a9e89c74d1fedd0a954107d7ab01481cc}{Kilobytes}}(5));}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{// This starts the client running in the background.}}
\DoxyCodeLine{lc\_client *Client = \mbox{\hyperlink{ab__loggerclient_8h_ac0c57a675621511fbe9f689133153026}{lc\_Initialize}}(\&Memory);}
\DoxyCodeLine{\textcolor{keywordflow}{if}(!Client)}
\DoxyCodeLine{\{}
\DoxyCodeLine{  printf(\textcolor{stringliteral}{"{}Failed to create client.\(\backslash\)n"{}});}
\DoxyCodeLine{  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{ab__loggerclient_8h_a7689fa737decb7131d5e2d35cbfdfaf0}{lc\_SetFile}}(Client, \textcolor{stringliteral}{"{}ClientTestLog.log"{}});}
\DoxyCodeLine{\textcolor{comment}{// Turn off stderr logging.}}
\DoxyCodeLine{\mbox{\hyperlink{ab__loggerclient_8h_aaca5d829482918e2ed2cc471b125555d}{lc\_SetQuiet}}(Client, \textcolor{keyword}{true});}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{ab__common_8h_ae9b1af5c037e57a98884758875d3a7c4}{s32}} EndpointIndexA = \mbox{\hyperlink{ab__loggerclient_8h_ac04c0ddd919205b976187626416eb72f}{lc\_AddEndpoint}}(Client, \textcolor{stringliteral}{"{}LoggerA"{}}, \textcolor{stringliteral}{"{}tcp://127.0.0.1:5555"{}});}
\DoxyCodeLine{\mbox{\hyperlink{ab__common_8h_ae9b1af5c037e57a98884758875d3a7c4}{s32}} EndpointIndexB = \mbox{\hyperlink{ab__loggerclient_8h_ac04c0ddd919205b976187626416eb72f}{lc\_AddEndpoint}}(Client, \textcolor{stringliteral}{"{}LoggerB"{}}, \textcolor{stringliteral}{"{}tcp://127.0.0.1:5556"{}});}
\DoxyCodeLine{}
\DoxyCodeLine{sleep(10);}
\DoxyCodeLine{\textcolor{comment}{// Print log files to stderr.}}
\DoxyCodeLine{\mbox{\hyperlink{ab__loggerclient_8h_aaca5d829482918e2ed2cc471b125555d}{lc\_SetQuiet}}(Client, \textcolor{keyword}{false});}
\DoxyCodeLine{sleep(10);}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{ab__loggerclient_8h_aa5a0bbd1987e475ac52efb8e9ab9e421}{lc\_Shutdown}}(Client);}
\end{DoxyCode}


\doxysubsection*{References}


\begin{DoxyItemize}
\item test\+\_\+loggerclient.\+cpp
\begin{DoxyItemize}
\item \mbox{\hyperlink{ab__logger_8h}{ab\+\_\+logger.\+h}}
\item \href{https://zeromq.org/}{\texttt{ zmq Messaging}}
\item \href{http://czmq.zeromq.org/}{\texttt{ czmq C Library for Z\+MQ messaging}} 
\end{DoxyItemize}
\end{DoxyItemize}

\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{ab__loggerclient_8h_ae447ebb43b063b77ad8be4bc630752ea}\label{ab__loggerclient_8h_ae447ebb43b063b77ad8be4bc630752ea}} 
\index{ab\_loggerclient.h@{ab\_loggerclient.h}!log\_function@{log\_function}}
\index{log\_function@{log\_function}!ab\_loggerclient.h@{ab\_loggerclient.h}}
\doxysubsubsection{\texorpdfstring{log\_function}{log\_function}}
{\footnotesize\ttfamily typedef void($\ast$ log\+\_\+function) (\mbox{\hyperlink{structlc__message}{lc\+\_\+message}} $\ast$Message, char $\ast$Endpoint\+Name, \mbox{\hyperlink{ab__common_8h_a70e369648385b50f2d0588e8e8745275}{b8}} is\+Pause, \mbox{\hyperlink{ab__common_8h_a70e369648385b50f2d0588e8e8745275}{b8}} is\+Quiet, F\+I\+LE $\ast$File\+Pointer)}



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{ab__loggerclient_8h_ac04c0ddd919205b976187626416eb72f}\label{ab__loggerclient_8h_ac04c0ddd919205b976187626416eb72f}} 
\index{ab\_loggerclient.h@{ab\_loggerclient.h}!lc\_AddEndpoint@{lc\_AddEndpoint}}
\index{lc\_AddEndpoint@{lc\_AddEndpoint}!ab\_loggerclient.h@{ab\_loggerclient.h}}
\doxysubsubsection{\texorpdfstring{lc\_AddEndpoint()}{lc\_AddEndpoint()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ab__common_8h_ae9b1af5c037e57a98884758875d3a7c4}{s32}} lc\+\_\+\+Add\+Endpoint (\begin{DoxyParamCaption}\item[{lc\+\_\+client $\ast$}]{Client,  }\item[{char const $\ast$}]{Label,  }\item[{char const $\ast$}]{Endpoint }\end{DoxyParamCaption})}



Adds a new endpoint to the client. 

This will add a new endpoint for the client to watch. Endpoint is a zmq-\/formated U\+RI, such as \char`\"{}tcp\+://127.\+0.\+0.\+1\+:5555\char`\"{}.


\begin{DoxyParams}{Parameters}
{\em Client} & The logger client. \\
\hline
{\em Label} & A label that can be used to differentiate this endpoint from other endpoints. \\
\hline
{\em Endpoint} & zmq U\+RI endpoint to watch. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The endpoint index, or \textquotesingle{}-\/1\textquotesingle{} if the endpoint couldn\textquotesingle{}t be added. 
\end{DoxyReturn}
\mbox{\Hypertarget{ab__loggerclient_8h_ac0d9dbe6724615cc950f36bb2b754fa2}\label{ab__loggerclient_8h_ac0d9dbe6724615cc950f36bb2b754fa2}} 
\index{ab\_loggerclient.h@{ab\_loggerclient.h}!lc\_ClearFile@{lc\_ClearFile}}
\index{lc\_ClearFile@{lc\_ClearFile}!ab\_loggerclient.h@{ab\_loggerclient.h}}
\doxysubsubsection{\texorpdfstring{lc\_ClearFile()}{lc\_ClearFile()}}
{\footnotesize\ttfamily void lc\+\_\+\+Clear\+File (\begin{DoxyParamCaption}\item[{lc\+\_\+client $\ast$}]{Client }\end{DoxyParamCaption})}



Closes the output file. 

If there is an output file, closes it and stops writing out data to it.


\begin{DoxyParams}{Parameters}
{\em Client} & The logger client. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ab__loggerclient_8h_ac0c57a675621511fbe9f689133153026}\label{ab__loggerclient_8h_ac0c57a675621511fbe9f689133153026}} 
\index{ab\_loggerclient.h@{ab\_loggerclient.h}!lc\_Initialize@{lc\_Initialize}}
\index{lc\_Initialize@{lc\_Initialize}!ab\_loggerclient.h@{ab\_loggerclient.h}}
\doxysubsubsection{\texorpdfstring{lc\_Initialize()}{lc\_Initialize()}}
{\footnotesize\ttfamily lc\+\_\+client$\ast$ lc\+\_\+\+Initialize (\begin{DoxyParamCaption}\item[{memory\+\_\+arena $\ast$}]{Memory,  }\item[{\mbox{\hyperlink{ab__common_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}}}]{Max\+Endpoints }\end{DoxyParamCaption})}



Initialize a new client. 

This initializes and starts a client thread. The client recieves messages from all the specified end-\/points and prints them. The client starts immediately, even if there are no endpoints.

The client can remove and add endpoints through its running. However, there can only be {\ttfamily Max\+Endpoints} number of endpoints running at any given time.


\begin{DoxyParams}{Parameters}
{\em Memory} & The memory from which the client can allocate. \\
\hline
{\em Max\+Endpoints} & The maximum number of endpoints the client will be attached to. There will always be a minimum of one endpoint created. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns the logger client, or null pointer if there isn\textquotesingle{}t enough memory to create the desired number of endpoints. 
\end{DoxyReturn}
\mbox{\Hypertarget{ab__loggerclient_8h_aaf1e1aebf452562ea45cd7e3448c0343}\label{ab__loggerclient_8h_aaf1e1aebf452562ea45cd7e3448c0343}} 
\index{ab\_loggerclient.h@{ab\_loggerclient.h}!lc\_RemoveEndpoint@{lc\_RemoveEndpoint}}
\index{lc\_RemoveEndpoint@{lc\_RemoveEndpoint}!ab\_loggerclient.h@{ab\_loggerclient.h}}
\doxysubsubsection{\texorpdfstring{lc\_RemoveEndpoint()}{lc\_RemoveEndpoint()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void lc\+\_\+\+Remove\+Endpoint (\begin{DoxyParamCaption}\item[{lc\+\_\+client $\ast$}]{Client,  }\item[{char const $\ast$}]{Label }\end{DoxyParamCaption})}



Not currently implemented. 

\mbox{\Hypertarget{ab__loggerclient_8h_a763a2979fb08e8e3d5e60d00c0fdd91c}\label{ab__loggerclient_8h_a763a2979fb08e8e3d5e60d00c0fdd91c}} 
\index{ab\_loggerclient.h@{ab\_loggerclient.h}!lc\_RemoveEndpoint@{lc\_RemoveEndpoint}}
\index{lc\_RemoveEndpoint@{lc\_RemoveEndpoint}!ab\_loggerclient.h@{ab\_loggerclient.h}}
\doxysubsubsection{\texorpdfstring{lc\_RemoveEndpoint()}{lc\_RemoveEndpoint()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void lc\+\_\+\+Remove\+Endpoint (\begin{DoxyParamCaption}\item[{lc\+\_\+client $\ast$}]{Client,  }\item[{\mbox{\hyperlink{ab__common_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}}}]{Index }\end{DoxyParamCaption})}



Not currently implemented. 

\mbox{\Hypertarget{ab__loggerclient_8h_a7689fa737decb7131d5e2d35cbfdfaf0}\label{ab__loggerclient_8h_a7689fa737decb7131d5e2d35cbfdfaf0}} 
\index{ab\_loggerclient.h@{ab\_loggerclient.h}!lc\_SetFile@{lc\_SetFile}}
\index{lc\_SetFile@{lc\_SetFile}!ab\_loggerclient.h@{ab\_loggerclient.h}}
\doxysubsubsection{\texorpdfstring{lc\_SetFile()}{lc\_SetFile()}}
{\footnotesize\ttfamily void lc\+\_\+\+Set\+File (\begin{DoxyParamCaption}\item[{lc\+\_\+client $\ast$}]{Client,  }\item[{char const $\ast$}]{Filename }\end{DoxyParamCaption})}



set output file. 

If set, log messages are appended to the given file. Only one file may be written to at a time. If a new file is specified, the old file is closed.


\begin{DoxyParams}{Parameters}
{\em Client} & The logger client. \\
\hline
{\em Filename} & The filename to append to. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ab__loggerclient_8h_aecbe2028770d0e505aec944870b9f91b}\label{ab__loggerclient_8h_aecbe2028770d0e505aec944870b9f91b}} 
\index{ab\_loggerclient.h@{ab\_loggerclient.h}!lc\_SetPause@{lc\_SetPause}}
\index{lc\_SetPause@{lc\_SetPause}!ab\_loggerclient.h@{ab\_loggerclient.h}}
\doxysubsubsection{\texorpdfstring{lc\_SetPause()}{lc\_SetPause()}}
{\footnotesize\ttfamily void lc\+\_\+\+Set\+Pause (\begin{DoxyParamCaption}\item[{lc\+\_\+client $\ast$}]{Client,  }\item[{\mbox{\hyperlink{ab__common_8h_a70e369648385b50f2d0588e8e8745275}{b8}}}]{do\+Pause }\end{DoxyParamCaption})}



Stop all incomming log messages. 

Set pause to discontinue recording all incoming messages. This will suppress both stderr and log file output.


\begin{DoxyParams}{Parameters}
{\em Client} & The logger client. \\
\hline
{\em do\+Pause} & True to pause all data from being recorded. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ab__loggerclient_8h_aaca5d829482918e2ed2cc471b125555d}\label{ab__loggerclient_8h_aaca5d829482918e2ed2cc471b125555d}} 
\index{ab\_loggerclient.h@{ab\_loggerclient.h}!lc\_SetQuiet@{lc\_SetQuiet}}
\index{lc\_SetQuiet@{lc\_SetQuiet}!ab\_loggerclient.h@{ab\_loggerclient.h}}
\doxysubsubsection{\texorpdfstring{lc\_SetQuiet()}{lc\_SetQuiet()}}
{\footnotesize\ttfamily void lc\+\_\+\+Set\+Quiet (\begin{DoxyParamCaption}\item[{lc\+\_\+client $\ast$}]{Client,  }\item[{\mbox{\hyperlink{ab__common_8h_a70e369648385b50f2d0588e8e8745275}{b8}}}]{do\+Quiet }\end{DoxyParamCaption})}



Set to discontinue output to stderr. 

By default, the logs will print to stderr. Set quiet to true to suppress output to stderr. If there is a log file, messages will still be written out.


\begin{DoxyParams}{Parameters}
{\em Client} & The logger client. \\
\hline
{\em do\+Quiet} & True to suppress output. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ab__loggerclient_8h_aa5a0bbd1987e475ac52efb8e9ab9e421}\label{ab__loggerclient_8h_aa5a0bbd1987e475ac52efb8e9ab9e421}} 
\index{ab\_loggerclient.h@{ab\_loggerclient.h}!lc\_Shutdown@{lc\_Shutdown}}
\index{lc\_Shutdown@{lc\_Shutdown}!ab\_loggerclient.h@{ab\_loggerclient.h}}
\doxysubsubsection{\texorpdfstring{lc\_Shutdown()}{lc\_Shutdown()}}
{\footnotesize\ttfamily void lc\+\_\+\+Shutdown (\begin{DoxyParamCaption}\item[{lc\+\_\+client $\ast$}]{Client }\end{DoxyParamCaption})}



Shutdown the client. 

Shutdown the client, all endpoints, and close background threads. Call this at the end of the program.


\begin{DoxyParams}{Parameters}
{\em Client} & The logger client. \\
\hline
\end{DoxyParams}
